<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0"
    />
    <meta
      name="description"
      content="A conversational AI system that listens, learns, and challenges"
    />

    <meta property="og:title" content="StudyMate" />
    <meta property="og:image" content="static/img/book.png" />
    <meta
      property="og:description"
      content="A conversational AI system that help users with school works"
    />
    <meta property="og:url" content="{{request.url}}" />

    <title>StudyMate</title>

    <!-- Styles -->
    <link rel="stylesheet" href="static/css/style.css" />
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="static/img/apple-touch-icon.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="static/img/favicon-32x32.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="static/img/favicon-16x16.png"
    />
    <link rel="manifest" href="static/img/site.webmanifest" />
    <link
      rel="stylesheet"
      href="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@latest/build/styles/base16/dracula.min.css"
    />
  </head>

  <body data-urlprefix="{{ url_prefix }}">
    <div id="alert-container"></div>
    <div class="main-container">
      <div class="box sidebar">
        <div class="top">
          <button class="button" onclick="new_conversation()">
            <i class="fa-solid fa-plus"></i>
            <span>New Conversation</span>
          </button>
          <div class="spinner"></div>
          <div class="conversation-list"></div>
        </div>

        <div class="sidebar-footer">
          <button class="button" onclick="delete_conversations()">
            <i class="fa-solid fa-trash"></i>
            <span>Clear Conversations</span>
          </button>
          <div class="settings-container">
            <div class="checkbox field">
              <span>Dark Mode</span>
              <input type="checkbox" id="theme-toggler" />
              <label for="theme-toggler"></label>
            </div>
            <!-- <div class="field">
						<span>Language</span>
						<select class="dropdown" id="language" onchange="changeLanguage(this.value)"></select>
					</div> -->
          </div>
          <a
            class="info"
            href="https://github.com/pamudu-pankaja/text-book-chat-bot"
            target="_blank"
          >
            <i class="fa-brands fa-github"></i>
            <span class="conversation-title"> Version: 0.3.0 </span>
          </a>
        </div>
      </div>

      <div class="conversation">
        <div class="stop-generating stop-generating-hidden">
          <button class="button" id="cancelButton">
            <span>Stop Generating</span>
          </button>
        </div>

        <div class="box" id="messages">
          <div id="welcome-msg" style="display: none">
            What do you want to know ?
          </div>
        </div>

        <div class="user-input">
          <div class="box input-box">
            <textarea
              id="message-input"
              placeholder="Ask a question"
              cols="30"
              rows="10"
              style="white-space: pre-wrap"
            ></textarea>
            <div id="send-button">
              <i class="fa-solid fa-arrow-right"></i>
            </div>
          </div>
        </div>

        <div class="options-container">
          <!-- <div class="buttons">
					<div class="field">
						<select class="dropdown" name="model" id="model">
							<option value="gpt-3.5-turbo">GPT-3.5</option>
							<option value="gpt-3.5-turbo-16k">GPT-3.5-turbo-16k</option>
							<option value="gpt-4" selected>GPT-4</option>
						</select>
					</div> -->
          <!-- <div class="field">
						<select class="dropdown" name="jailbreak" id="jailbreak">
							<option value="default" selected>Default</option>
							<option value="gpt-dan-11.0">DAN</option>
							<option value="gpt-evil">Evil</option>
						</select>
					</div>
				</div> -->

          <div class="field checkbox toogle-group" id="resourceToggleGroup">
            <input type="checkbox" id="switch_web" onchange="toggleOff(this)" />
            <label for="switch_web"></label>
            <span>Using Web</span>

            <input
              type="checkbox"
              id="switch_book"
              onchange="toggleOff(this)"
            />
            <label for="switch_book" class="switch_book"></label>
            <span>Using PDF</span>
          </div>
        </div>
      </div>
      <div class="menu-button-container">
        <div class="menu-button menu-button-2">
          <i class="fa-solid fa-database"></i>
        </div>
        <div class="dot-container">
          <div id="red-dot" class="red-dot"></div>
        </div>
        <div class="menu-button menu-button-3">
          <i class="fa-solid fa-envelope"></i>
        </div>
      </div>
    </div>

    <div class="hidden right-sidebar" id="rightSidebar">
      <div class="top">
        <span id="data_base_span">Data Base Information</span>
      </div>

      <div class="sidebar-content">
        <!-- Text Book Section -->
        <div class="section select">
          <div class="section-title">
            <i class="fa-solid fa-book"></i>
            <span>Text Book</span>
          </div>

          <div class="input-group">
            <div class="dropdown-container">
              <input
                autocomplete="off"
                spellcheck="false"
                type="text"
                placeholder="Name of the text book"
                id="index"
              />
              <div id="dropdown" class="dropdown-list">
                <div class="dropdown-item add-new">
                  <span>+</span>
                  <span>Add New Book</span>
                </div>
              </div>
            </div>

            <button class="btn" id="index-name-btn" onclick="setIndex()">
              <i class="fa-regular fa-layer-plus"></i>
              <span>Set Book</span>
            </button>
          </div>
        </div>
                <!-- Current Status -->
        <div class="current-info-container">
          <div class="current-status-title">Current Status</div>
          <div class="current-index" id="current-index">Book Name: Not set</div>
        </div>


        <!-- Import PDF Section -->
        <div class="section import">
          <div class="section-title">
            <i class="fa-solid fa-file-circle-plus"></i>
            <span>Import PDF File</span>
          </div>

          <div class="input-group">
            <div class="file-input-wrapper">
              <div class="file-display">
                <span>+ Select a file</span>
              </div>
              <input type="file" id="file_input" accept=".pdf" />
            </div>

            <div id="file_name">No file chosen</div>

            <div class="starting-page-group">
              <div class="tooltip-wrapper">
                <i class="fa fa-info-circle info-icon"></i>
                <span class="tooltip-text">
                  If the book you are choosing has any credits in the front
                  pages, please set the page you would like to start counting,
                  else keep it as zero. Click for more details.
                </span>
              </div>
              <input
                type="number"
                placeholder="Starting page"
                id="starting-page"
                value="0"
              />
            </div>

            <button class="btn" onclick="uploadFile()" id="file-upload-btn">
              <i class="fa-solid fa-upload"></i>
              <span>Import File</span>
            </button>

            <div id="file-fallback-message" class="error"></div>
          </div>
        </div>

        <!-- Delete Text Book Section -->
        <div class="section delete">
          <div class="section-title">
            <i class="fa-solid fa-trash"></i>
            <span>Delete Text Book</span>
          </div>

          <div class="input-group">
            <div class="dropdown-container">
              <input
                autocomplete="off"
                spellcheck="false"
                type="text"
                placeholder="Name of the text book"
                id="namespace-delete"
              />
              <div id="dropdown-2" class="dropdown-list"></div>
            </div>

            <button class="btn" id="book-delete-btn" onclick="deleteBook()">
              <i class="fa-regular fa-layer-plus"></i>
              <span>Delete</span>
            </button>
          </div>
        </div>
      </div>
    </div>

    <div class="hidden box right-sidebar mail" id="rightSidebar">
      <div class="top">
        <span>Inbox</span>
      </div>
      <div id="index-messages"></div>
    </div>

    <div class="menu-button menu-button-1">
      <i class="fa-solid fa-bars"></i>
    </div>

    <!-- Scripts -->
    <script>
      window.conversation_id = "{{ chat_id or '' }}";
    </script>
    <!-- <script src="static/js/icons.js" defer></script> -->
    <script
      src="https://cdn.jsdelivr.net/npm/markdown-it@latest/dist/markdown-it.min.js"
      defer
    ></script>
    <script
      src="https://kit.fontawesome.com/12c4d6a4a9.js"
      crossorigin="anonymous"
    ></script>
    <script src="static/js/highlight.min.js" defer></script>
    <script src="static/js/highlightjs-copy.min.js" defer></script>
    <script src="static/js/theme-toggler.js" defer></script>
    <script src="static/js/sidebar-toggler.js" defer></script>
    <script src="static/js/toggle-button.js" defer></script>
    <script src="static/js/index-name.js" defer></script>
    <script src="static/js/import-file.js" defer></script>
    <script src="static/js/chat.js" defer></script>
    <script src="static/js/book-drop-down.js" defer></script>
    <script src="static/js/mail.js" defer></script>
    <script src="static/js/alert.js" defer></script>
  </body>
</html>
